<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>


<script>

    //1
    function factory(n) {

        if(isFinite(n) && n>0 && n==Math.round(n)){

            if(!(n in factory))
                 factory[n] = n * factory(n - 1);
            return factory[n];

        }else {
            return 1;
        }

    }

    factory(1);
    factory(2);
    factory(3);
    factory(4);

    //2
//    function addObj(o,name,predicate) {
//        var value;
//
//        o['get'+name] = function () {
//            return value;
//        }
//
//        o['set' + name] = function (v) {
//
//            if(predicate && !predicate(v)){
//                throw Error('出错了!');
//            }else {
//                value = v;
//            }
//        };
//    }
//
//    function isString(val) {
//        return typeof val == "string";
//    }
//
//    var o = {};
//    addObj(o, 'Name', isString);
//    o.setName('framk');
//    console.log(o.getName());
//    o.setName({});

    //3
    function fibonacci(n) {

        if(Number.isInteger(n) && n>0){

            if(n>1){
                return fibonacci(n - 1) + fibonacci(n - 2);
            }else {
                return 1;
            }

        }else {
            return 0;
        }

    }

    console.log(fibonacci(1));
    console.log(fibonacci(2));
    console.log(fibonacci(3));
    console.log(fibonacci(4));

    //4
    function check(args) {
        var actual = args.length;
        var expected = args.callee.length;
        console.log(actual, expected);
    }

    function f(a,c,b) {
        check(arguments);
    }

    f(3, 4, 5);

    //5
    function trace(o,m) {
        var original = o[m];
        o[m] = function () {
            console.log(new Date(), 'Entering', m);
            var result = original.apply(this, arguments);
            console.log(new Date(), 'Exiting', m);
            return result;
        };
    }
    var tempObj = {
        a:122,
        show:function (val) {
            console.log(this.a,val);
        }
    };

    tempObj.show(20);
    trace(tempObj, 'show');
    tempObj.show(20);

    //6
    function bind(f,o) {

        if(f.bind){
            return f.bind(o);
        }else {
            return function () {
                return f.apply(o, arguments);
            }
        }

    }

    //7
    var sum = function (x, y) {
        return x + y;
    };
    var succ = sum.bind(null, 1);
    console.log(succ(2));

    //8
    Function.prototype.testbind = function () {
        var _this = this;
        var args = Array.prototype.slice.call(arguments,0);

        var firstArgs = args.shift();
        return function () {
            var newArguments = Array.prototype.slice.call(arguments, 0);
            var newArgs = args.concat(newArguments);
            return _this.apply(firstArgs, newArgs);

        };
    };
    function testBind(x,y,z,a) {
        return x + y + z + a;
    }
    var newTestBind = testBind.testbind(null, 1, 2, 3, 4);
    console.log(newTestBind());


</script>
</body>
</html>